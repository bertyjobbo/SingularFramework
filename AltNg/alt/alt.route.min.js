"use strict";var alt=alt||{};alt.route=angular.module("alt.route",["ng"]),function(n){n.service("altControllerChecker",["$controller",function(n){return{exists:function(t){if(typeof window[t]=="function")return!0;try{return n(t),!0}catch(i){return!(i instanceof TypeError)}}}}]);n.directive("altView",["$location","$controller","$compile","$rootScope","$http","altControllerChecker",function(n,t,i,r,u,f){return{restrict:"A",link:function(t,r,e){r.removeAttr("data-alt-view");r.removeAttr("alt-view");var s=e.altView,o={};n.$$path==""&&n.path("/");t.$watch(function(){return n.$$path},function(n){t.$broadcast("$routeChangeStart",n)});t.$on("$routeChangeStart",function(e,h){var c,y,p,l,a,w,v;if(h=h.toLowerCase(),c=h==="/"?["home","index"]:h==="/home"||h==="/home/"?["home","index"]:h.substr(1).split("/"),c[c.length-1]===""&&c.splice(c.length-1,1),c.length===1&&(c[1]="index"),c.length===0&&n.path("/"),n.$$route={},n.$$route.$$routeController=c[0]+"Controller",n.$$route.$$routeControllerName=c[0],n.$$route.$$routeAction=c[1]+"Action",n.$$route.$$routeActionName=c[1],n.$$route.$$routeParams=[],c.length>2)for(y=2;y<c.length;y++)n.$$route.$$routeParams.push(c[y]);if(p=f.exists(n.$$route.$$routeController),p){for(r.attr("data-ng-controller",n.$$route.$$routeController),l=n.$$route.$$routeAction+"(",a=0;a<n.$$route.$$routeParams.length;a++)l+="'"+n.$$route.$$routeParams[a]+"'",a<n.$$route.$$routeParams.length-1&&(l+=", ");l+=");";r.attr("data-ng-init",l)}else r.removeAttr("data-ng-controller"),r.removeAttr("ng-controller");w=s.replace(/(\$controller)/g,"'"+n.$$route.$$routeControllerName+"'").replace(/(\$action)/g,"'"+n.$$route.$$routeActionName+"'");try{v=t.$eval(w)}catch(b){throw"Cannot $eval replaceUrlExpression in Alt-View. Make sure you use both $controller and $action in the URL: "+b;}o[v]?(r.html(o[v]),i(r)(t),t.$broadcast("$routeChangeSuccess",n.$$route)):u.get(v).success(function(u){o[v]=u;r.html(u);i(r)(t);t.$broadcast("$routeChangeSuccess",n.$$route)}).error(function(){t.$broadcast("$routeChangeError",n.$$route)})})}}}]);n.directive("altHref",[function(){return{restrict:"A",link:function(n,t,i){if(i.altHref&&i.altHref!==""){var u="#/",r=i.altHref.indexOf(",")>-1?i.altHref.split(","):[i.altHref];r.length==1&&(r[1]="index");angular.forEach(r,function(n){u+=n+"/"});t.removeAttr("alt-href");t.removeAttr("data-alt-href");t.attr("href",u)}}}}])}(alt.route);
//# sourceMappingURL=alt.route.min.js.map
