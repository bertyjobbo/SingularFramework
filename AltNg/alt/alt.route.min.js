"use strict";var alt=alt||{};alt.route=angular.module("alt.route",["ng"]),function(n){n.service("altControllerChecker",["$controller",function(n){return{exists:function(t){if(typeof window[t]=="function")return!0;try{return n(t),!0}catch(i){return!(i instanceof TypeError)}}}}]);n.directive("altView",["$location","$controller","$compile","$rootScope","$http","altControllerChecker",function(n,t,i,r,u,f){return{restrict:"A",link:function(t,r,e){r.removeAttr("data-alt-view");r.removeAttr("alt-view");var s=e.altView,h=e.altViewCache!="false",o={};n.$$path==""&&n.path("/");t.$watch(function(){return n.$$path},function(n){t.$broadcast("$routeChangeStart",n)});t.$on("$routeChangeStart",function(e,c){var l,p,w,a,v,b,y;if(c=c.toLowerCase(),l=c==="/"?["home","index"]:c==="/home"||c==="/home/"?["home","index"]:c.substr(1).split("/"),l[l.length-1]===""&&l.splice(l.length-1,1),l.length===1&&(l[1]="index"),l.length===0&&n.path("/"),n.$$route={},n.$$route.$$routeController=l[0]+"Controller",n.$$route.$$routeControllerName=l[0],n.$$route.$$routeAction=l[1]+"Action",n.$$route.$$routeActionName=l[1],n.$$route.$$routeParams=[],l.length>2)for(p=2;p<l.length;p++)n.$$route.$$routeParams.push(l[p]);if(w=f.exists(n.$$route.$$routeController),w){for(r.attr("data-ng-controller",n.$$route.$$routeController),a=n.$$route.$$routeAction+"(",v=0;v<n.$$route.$$routeParams.length;v++)a+="'"+n.$$route.$$routeParams[v]+"'",v<n.$$route.$$routeParams.length-1&&(a+=", ");a+=");";r.attr("data-ng-init",a)}else r.removeAttr("data-ng-controller"),r.removeAttr("ng-controller");b=s.replace(/(\$controller)/g,"'"+n.$$route.$$routeControllerName+"'").replace(/(\$action)/g,"'"+n.$$route.$$routeActionName+"'");try{y=t.$eval(b)}catch(k){throw"Cannot $eval replaceUrlExpression in Alt-View. Make sure you use both $controller and $action in the URL: "+k;}h&&o[y]?(r.html(o[y]),i(r)(t),t.$broadcast("$routeChangeSuccess",n.$$route)):u.get(y).success(function(u){o[y]=u;r.html(u);i(r)(t);t.$broadcast("$routeChangeSuccess",n.$$route)}).error(function(){t.$broadcast("$routeChangeError",n.$$route)})})}}}]);n.directive("altHref",[function(){return{restrict:"A",link:function(n,t,i){if(i.altHref&&i.altHref!==""){var u="#/",r=i.altHref.indexOf(",")>-1?i.altHref.split(","):[i.altHref];r.length==1&&(r[1]="index");angular.forEach(r,function(n){u+=n+"/"});t.removeAttr("alt-href");t.removeAttr("data-alt-href");t.attr("href",u)}}}}])}(alt.route);
//# sourceMappingURL=alt.route.min.js.map
