"use strict";var alt=alt||{};alt.route=angular.module("alt.route",["ng"]),function(n){n.service("altControllerChecker",["$controller",function(n){return{exists:function(t){if(typeof window[t]=="function")return!0;try{return n(t),!0}catch(i){return!(i instanceof TypeError)}}}}]);n.directive("altView",["$location","$controller","$compile","$rootScope","$http","altControllerChecker",function(n,t,i,r,u,f){return{restrict:"A",link:function(t,e,o){e.removeAttr("data-alt-view");e.removeAttr("alt-view");var h=o.altView,c=o.altViewCache!="false",s={};n.$$path==""&&n.path("/");t.$watch(function(){return n.$$path},function(n){r.$broadcast("$routeChangeStart",n)});r.$on("$routeChangeStart",function(o,l){var a,w,b,v,y,k,p;if(l=l.toLowerCase(),a=l==="/"?["home","index"]:l==="/home"||l==="/home/"?["home","index"]:l.substr(1).split("/"),a[a.length-1]===""&&a.splice(a.length-1,1),a.length===1&&(a[1]="index"),a.length===0&&n.path("/"),n.$$route={},n.$$route.$$routeController=a[0]+"Controller",n.$$route.$$routeControllerName=a[0],n.$$route.$$routeAction=a[1]+"Action",n.$$route.$$routeActionName=a[1],n.$$route.$$routeParams=[],a.length>2)for(w=2;w<a.length;w++)n.$$route.$$routeParams.push(a[w]);if(b=f.exists(n.$$route.$$routeController),b){for(e.attr("data-ng-controller",n.$$route.$$routeController),v=n.$$route.$$routeAction+"(",y=0;y<n.$$route.$$routeParams.length;y++)v+="'"+n.$$route.$$routeParams[y]+"'",y<n.$$route.$$routeParams.length-1&&(v+=", ");v+=");";e.attr("data-ng-init",v)}else e.removeAttr("data-ng-controller"),e.removeAttr("ng-controller");k=h.replace(/(\$controller)/g,"'"+n.$$route.$$routeControllerName+"'").replace(/(\$action)/g,"'"+n.$$route.$$routeActionName+"'");try{p=t.$eval(k)}catch(d){throw"Cannot $eval replaceUrlExpression in Alt-View. Make sure you use both $controller and $action in the URL: "+d;}c&&s[p]?(e.html(s[p]),i(e)(t),r.$broadcast("$routeChangeSuccess",n.$$route)):u.get(p).success(function(u){s[p]=u;e.html(u);i(e)(t);r.$broadcast("$routeChangeSuccess",n.$$route)}).error(function(t,i){r.$broadcast("$routeChangeError",t,i,n.$$route)})})}}}]);n.directive("altHref",[function(){return{restrict:"A",link:function(n,t,i){if(i.altHref&&i.altHref!==""){var u="#/",r=i.altHref.indexOf(",")>-1?i.altHref.split(","):[i.altHref];r.length==1&&(r[1]="index");angular.forEach(r,function(n){u+=n+"/"});t.removeAttr("alt-href");t.removeAttr("data-alt-href");t.attr("href",u)}}}}])}(alt.route);
//# sourceMappingURL=alt.route.min.js.map
