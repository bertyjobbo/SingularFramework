"use strict";if(Singular==undefined)var Singular={};Singular.Common==undefined&&(Singular.Common={});Singular.Common.SingularCommon=angular.module("Singular.Common.SingularCommon",["ng"]),function(n){n.service("sgCrudService",["$q","$http",function(n,t){var r=this,i;r.Post=function(r,u,f,e){r.NonPropSgValidationErrors===undefined&&(r.NonPropSgValidationErrors=function(){var n=[];for(var t in r.SgValidationErrors)t.indexOf("NonProp")===0&&n.push(r.SgValidationErrors[t]);return n});var o=n.defer();return t.post(u,f).success(function(n){var u=strng.IsNullOrWhiteSpace(e)?"Model.":e,t=i(n,u);objct.IsNullOrEmpty(t)?(n.Success=function(){return!0},o.resolve(n)):(r.SgValidationErrors=t,t.Success=function(){return!1},o.resolve(t))}).error(function(n,t,i,u){r.SgValidationErrors={};r.SgValidationErrors["NonProp_sgCrudService.Post.Error"]=window.GENERAL_ERROR_MESSAGE;o.resolve({Error:n,StatusCode:t,Request:u,Success:function(){return!1}})}),o.promise};i=function(n,t){var r={},i,u;if(n.Success)return r;for(i=0;i<n.Errors.length;i++)r["NonProp_sgCrudService.Post.Error"+i]=n.Errors[i];for(i=0;i<n.PropertyErrors.length;i++)u=n.PropertyErrors[i],r[t+u.PropertyName]=u.ErrorMessage;return r}}]);n.directive("sgValidationErrors",["$compile",function(n){return{restrict:"A",link:function(t,i,r){var f=r.sgValidationErrors,u;i.removeAttr("sg-validation-errors");i.removeAttr("data-sg-validation-errors");u='<ul><li ng-repeat="(key, sgve) in NonProp'+f+'()">{{sgve}}<\/li><\/ul>';i.html(u);n(i)(t)}}}]);n.directive("sgPropertyError",[function(){return{restrict:"A",link:function(n,t,i){var r=i.sgPropertyError;t[0].style.display="none";n.$watch(function(){return n.$eval(r)},function(n){if(n!==undefined&&!strng.IsString(n))throw"sgPropertyError parameter "+r+" is not a string on this scope";strng.IsNullOrEmpty(n)?(t[0].style.display="none",t.html("")):(t[0].style.display="inherit",t.html(n))},!0)}}}]);n.directive("sgPropertyErrorControl",[function(){return{restrict:"A",link:function(n,t,i){var r=i.sgPropertyErrorControl;n.$watch(function(){return n.$eval(r)},function(n){if(n!==undefined&&!strng.IsString(n))throw"sgPropertyError parameter "+r+" is not a string on this scope";strng.IsNullOrEmpty(n)?(t.removeClass("ng-dirty"),t.removeClass("sg-dirty"),t.removeClass("ng-invalid"),t.removeClass("sg-invalid")):(t.addClass("ng-dirty"),t.addClass("sg-dirty"),t.addClass("ng-invalid"),t.addClass("sg-invalid"))},!0)}}}]);n.config(["$provide","$httpProvider",function(n,t){n.factory("myHttpInterceptor",["$q","$rootScope",function(n,t){return t.IsLoading=function(){return t.Ui.LoaderVisible===!0},t.SetLoading=function(n){return t.Ui.LoaderVisible=n,t},t.HasHttpErrors=function(){return t.__requestError!=undefined||t.__responseError!=undefined},t.ClearHttpErrors=function(){return t.__requestError=undefined,t.__responseError=undefined,t},t.HasHttpRequestError=function(){return t.__requestError!=undefined},t.HasHttpResponseError=function(){return t.__responseError!=undefined},t.GetHttpRequestError=function(){return t.__requestError||{data:undefined,config:undefined,status:undefined,statusText:undefined,headers:undefined}},t.GetHttpResponseError=function(){return t.__responseError||{data:undefined,config:undefined,status:undefined,statusText:undefined,headers:undefined}},{request:function(n){return t.ClearHttpErrors().SetLoading(!0),n},requestError:function(i){return t.__requestError=i,t.SetLoading(!1),console.log("Request error: ",i),n.reject(i)},response:function(n){return t.SetLoading(!1),n},responseError:function(i){return t.__responseError=i,t.SetLoading(!1),console.log("Response error: ",i),n.reject(i)}}}]);t.interceptors.push("myHttpInterceptor")}]);n.run(["$rootScope",function(n){n.Ui={LoaderVisible:!1,ShowLoader:function(){n.$broadcast("SgLoaderShow")},HideLoader:function(){n.$broadcast("SgLoaderHide")}};n.RootedUrl=function(n){return window.ROOT_URL+n};n.$on("SgLoaderShow",function(){n.Ui.LoaderVisible=!0});n.$on("SgLoaderHide",function(){n.Ui.LoaderVisible=!1});n.$on("$routeChangeStart",function(){n.Ui.ShowLoader()});n.$on("$routeChangeSuccess",function(){n.Ui.HideLoader()});n.$on("$routeChangeError",function(t,i,r){if(r===403){window.location=n.RootedUrl("Singular/Core/Sys/AccessDenied");return}if(r===404){window.location=n.RootedUrl("Singular/Core/Sys/PageNotFound");return}if(r===500){window.location=n.RootedUrl("Singular/Core/Sys/Error");return}});n.Alert=function(n){alert(n)};n.Log=function(n,t){t?console.log(n,t):console.log(n)}}])}(Singular.Common.SingularCommon);
//# sourceMappingURL=SingularCommon.min.js.map
